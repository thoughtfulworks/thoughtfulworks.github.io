<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="icon" href="/assets/images/logo/logo_square.png">

<title>Kubernetes Basics | thoughtful works</title>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Kubernetes Basics | thoughtful works</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Kubernetes Basics" />
<meta name="author" content="senthil" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="What is Kubernetes?" />
<meta property="og:description" content="What is Kubernetes?" />
<link rel="canonical" href="http://localhost:4000/kubernetes/2022/kubernetes-basics" />
<meta property="og:url" content="http://localhost:4000/kubernetes/2022/kubernetes-basics" />
<meta property="og:site_name" content="thoughtful works" />
<meta property="og:image" content="http://localhost:4000/assets/images/posts-cover-images/kubernetes-basics.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-08-17T00:00:00+05:30" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/assets/images/posts-cover-images/kubernetes-basics.jpg" />
<meta property="twitter:title" content="Kubernetes Basics" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"senthil"},"dateModified":"2022-08-17T00:00:00+05:30","datePublished":"2022-08-17T00:00:00+05:30","description":"What is Kubernetes?","headline":"Kubernetes Basics","image":"http://localhost:4000/assets/images/posts-cover-images/kubernetes-basics.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/kubernetes/2022/kubernetes-basics"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo/logo_transparent.png"},"name":"senthil"},"url":"http://localhost:4000/kubernetes/2022/kubernetes-basics"}</script>
<!-- End Jekyll SEO tag -->

    
<link href="/assets/css/prism.css" rel="stylesheet">

<link href="/assets/css/theme.css" rel="stylesheet">

<script src="/assets/js/jquery.min.js"></script>

<script src="https://kit.fontawesome.com/a04651ccb8.js" crossorigin="anonymous"></script>

</head>




<body class="line-numbers">
    <div class="site-wrapper">
        <header class="site-header">
            <div class="outer site-nav-main">
                <div class="inner">
                    <nav class="site-nav">
                        <div class="site-nav-left-wrapper">
                            <div class="site-nav-left">
                                <!-- Site Logo/Name -->
                                <a class="navbar-brand" href="/">
                                    <img src="/assets/images/logo/logo_transparent.png" alt="thoughtful works">
                                </a>
                                &nbsp;&nbsp;
                                <a href="https://twitter.com/thoughtfulwx" target="_blank" style="text-decoration: none;">
                                    <span style="color:#000000; font-size: 25px;">
                                        <i class="fa-brands fa-x-twitter"></i>
                                    </span>
                                </a>
                                <a href="https://www.instagram.com/thoughtful.works/" target="_blank" style="text-decoration: none;">
                                    <span style="color:#000000; font-size: 25px;">
                                        <i class="fa-brands fa-square-instagram"></i>
                                    </span>
                                </a> 
                                <a href="https://github.com/thoughtfulworks?tab=repositories" target="_blank" style="text-decoration: none;">
                                    <span style="color:#000000; font-size: 25px;">
                                        <i class="fa-brands fa-github"></i>
                                    </span>
                                </a>
                                <span style="color: grey; font-size: 25px;"><i class="fa-solid fa-ellipsis-vertical"></i></span>
                                <script src="/assets/js/lunr.js"></script>

<style>
    
</style>

<div class="wrap-search">
    <div class="d-flex align-items-center ml-auto">
        <i class="fas fa-search show-search"></i>
        <form class="bd-search ml-3" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
            <input type="text" class="form-control bigradius text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
        </form>
    </div>
</div>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </header>
    </div>

	<!-- Defer loading of font and font awesome -->
	<noscript id="deferred-styles">
		<link href="https://fonts.googleapis.com/css?family=Sen:400,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	</noscript>

    <!-- Back to top icon/button -->
    <script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
    <!-- <script>addBackToTop()</script>     -->
    <script>addBackToTop({
        diameter: 50,
        backgroundColor: 'rgba(22, 22, 23, .8)',
        textColor: '#fff'
        })
    </script>

    <!-- Begin Sidebar Navigation -->
    <div class="sidebar">    
    </div>   
    <div class="nav-icon">
        <div class="hamburger-bar"></div>
    </div>
    <div id="blackover-nav" class="blackover"></div>
    <nav id="menu">
        <ul>
            <h4>Navigation</h4>
            <li><a href="/tags">Tags</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/authors">Contributors</a></li>
            <li><a href="/contact">Contact us</a></li>       
        </ul>   
    </nav>

    <!-- <script src="/assets/js/lunr.js"></script>

<style>
    
</style>

<div class="wrap-search">
    <div class="d-flex align-items-center ml-auto">
        <i class="fas fa-search show-search"></i>
        <form class="bd-search ml-3" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
            <input type="text" class="form-control bigradius text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
        </form>
    </div>
</div>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script> -->
    <!-- End Sidebar Navigation -->

    <div class="site-content ">

    <div class="container">
        <!-- Content -->
        <div class="main-content">
            <div class="entry-header">
    <!-- Kicker -->
    
        <!--<h6 class="kicker">Kubernetes</h6>-->
        <span class="kicker">
            <a href="/categories#kubernetes">Kubernetes</a>
        </span>
    

    <!-- Post Title -->
    <h1 class="posttitle">Kubernetes Basics</h1>

    <!-- Author and Date -->
    
    
        <div class="d-flex align-items-center mt-4" style="font-size: 100%">
            <div>
                
                <img class="author-thumb" src="https://www.gravatar.com/avatar/6fc127cda8cd99830932538a58dc6173?s=250&d=mm&r=x" alt="Senthil Nayagan">
                
            </div>            
            <div>
                
                    <!-- <a target="_blank" href="https://www.linkedin.com/in/senthilnayagan" style="color: black; border-bottom: 1px solid blue;"><b>Senthil Nayagan</b></a> -->
                    <span class="author-name">
                        <a target="_blank" href="https://www.linkedin.com/in/senthilnayagan">Senthil Nayagan</a>
                    </span>
                
                
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span class="social-connect-icon">
                        <a target="_blank" href="https://senthilnayagan.com/">
                            <i class="fa-solid fa-window-maximize"></i>
                        </a>
                    </span> 
                                     
                
                    &nbsp;
                    <span class="social-connect-icon">
                        <a target="_blank" href="https://fosstodon.org/@towardsdata">
                            <i class="fa-brands fa-mastodon"></i>
                        </a>                         
                    </span>
                                
                
                    &nbsp;
                    <span class="social-connect-icon">
                        <a target="_blank" href="https://twitter.com/SenthilNayagan">
                            <i class="fa-brands fa-x-twitter"></i>
                        </a>                         
                    </span>                    
                
                
                    &nbsp;
                    <span class="social-connect-icon">
                        <a target="_blank" href="https://www.instagram.com/senthilnayagan">
                            <i class="fa-brands fa-square-instagram"></i>
                        </a>                         
                    </span>                    
                                                   
                <br/> 
                <span class="post-date-and-mins-read">           
                    
                        <i class="fa-regular fa-calendar-days"></i>&nbsp;<time datetime="2022-08-17T00:00:00+05:30">Aug 17, 2022</time>
                    
                    
                    -&nbsp;<i class="fa-solid fa-clock"></i>&nbsp;33 Mins Read
                </span>
            </div>            
        </div>
    
</div>

<!-- Adsense under title if enabled from _config.yml (change your pub id and slot) -->
<!---->

<!-- Tags -->
<div class="article-post">
    <ul class="tags">
        
        
        <li>
            <a class="smoothscroll" href="/tags#container-management">container-management</a>
        </li>
        
        <li>
            <a class="smoothscroll" href="/tags#container-orchestration">container-orchestration</a>
        </li>
        
        <li>
            <a class="smoothscroll" href="/tags#kubernetes">kubernetes</a>
        </li>
        
    </ul>
</div>

<!-- Summary -->
<div class="summary">
    
        <p></p>
        <span style="font-weight: 50;">Kubernetes is a Google-developed open source container orchestration platform for managing microservices or containerized applications across a distributed cluster of nodes.</span>
    
    <hr class="grey_line"></hr>
</div>

<!-- Draft - Shows writing in progress -->
<div class="draft">
    
        <div class="row" style="padding: 0; margin: 0;">
            <div class="col-md-1" style="padding: 5px; margin: 0;">
                <span class="icon">
                    <img src="/assets/images/icons/work-in-progress.png" alt="Work in progress">
                </span>
            </div>
            <div class="col-md-11 align-self-center" style="padding: 5px; margin: 0;">
                <span>
                    If you have any suggestions for improving the content or notice any inaccuracies, please email us at <a href="mailto:hello@rustinaction.dev">hello@rustinaction.dev</a>. Thanks!
                </span>
            </div>
        </div>
    
</div>

<!-- Featured Image -->

<div class="entry-featured-image">
    
        <img class="featured-image  image-shadow " src="/assets/images/posts-cover-images/kubernetes-basics.jpg" alt="Kubernetes Basics">
    
    
        <span class="featured-image-credits">
            <p><b>Image Credits: </b>Vector image designed by <a href='https://www.freepik.com/' target='_blank'>freepik</a>.</p>
        </span>
    
 </div>


<!-- Content -->
<!-- Post, Page Content
================================================== -->
<div class="article-post">
    <!-- Toc if any -->
    
    <!---->
    <div class="toc mt-4 mb-4 lead" style="font-size: 85%">
        <h5 class="font-weight-bold">Table of contents</h5>
        <ul>
  <li><a href="#what-is-kubernetes">What is Kubernetes?</a></li>
  <li><a href="#kubernetes-components">Kubernetes components</a>
    <ul>
      <li><a href="#what-is-a-control-plane-and-why-do-we-need-it">What is a control plane and why do we need it?</a>
        <ul>
          <li><a href="#components-of-the-control-plane">Components of the control plane</a>
            <ul>
              <li><a href="#kube-apiserver">kube-apiserver</a></li>
              <li><a href="#etcd-persistent-data-store">etcd (persistent data store)</a></li>
              <li><a href="#kube-scheduler">kube-scheduler</a></li>
              <li><a href="#kube-controller-manager">kube-controller-manager</a></li>
              <li><a href="#cloud-controller-manager">cloud-controller-manager</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#kubernetes-concepts">Kubernetes concepts</a>
        <ul>
          <li><a href="#cluster">Cluster</a></li>
          <li><a href="#nodes">Nodes</a></li>
          <li><a href="#workloads">Workloads</a></li>
          <li><a href="#pod">Pod</a></li>
          <li><a href="#labels">Labels</a></li>
          <li><a href="#label-selectors">Label selectors</a></li>
          <li><a href="#annotations">Annotations</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#kubernetes-command-line-tools">Kubernetes command-line tools</a>
    <ul>
      <li><a href="#kubectl">kubectl</a></li>
      <li><a href="#kind">kind</a>
        <ul>
          <li><a href="#installation">Installation</a></li>
          <li><a href="#create-a-cluster">Create a cluster</a></li>
          <li><a href="#interacting-with-the-cluster">Interacting with the cluster</a></li>
        </ul>
      </li>
      <li><a href="#minikube">minikube</a>
        <ul>
          <li><a href="#minimum-requirements-to-install-minikube">Minimum requirements to install minikube</a></li>
          <li><a href="#start-our-cluster">Start our cluster</a></li>
          <li><a href="#minikube-dashboard">minikube dashboard</a></li>
        </ul>
      </li>
      <li><a href="#kubeadm">kubeadm</a></li>
    </ul>
  </li>
  <li><a href="#deploying-a-kubernetes-cluster">Deploying a Kubernetes cluster</a>
    <ul>
      <li><a href="#installing-and-configuring-a-full-fledged-kubernetes-cluster-with-multiple-nodes">Installing and configuring a full-fledged Kubernetes cluster with multiple nodes</a></li>
      <li><a href="#using-the-built-in-kubernetes-cluster-in-docker-desktop">Using the built-in Kubernetes cluster in Docker Desktop</a></li>
      <li><a href="#running-a-local-cluster-using-minikube-cli">Running a local cluster using minikube CLI</a>
        <ul>
          <li><a href="#installing-minikube-cli">Installing minikube CLI</a></li>
        </ul>
      </li>
      <li><a href="#packing-applications-in-containers">Packing applications in containers</a>
        <ul>
          <li><a href="#kubernetes-configuration">Kubernetes configuration</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#frequently-asked-questions-faq">Frequently asked questions (FAQ)</a>
    <ul>
      <li><a href="#can-we-have-more-than-one-container-in-a-worker-node">Can we have more than one container in a worker node?</a></li>
      <li><a href="#where-the-pods-are-hosted">Where the pods are hosted?</a></li>
      <li><a href="#what-is-the-workload-in-kubernetes">What is the workload in Kubernetes?</a></li>
      <li><a href="#what-is-kubelet">What is kubelet?</a></li>
      <li><a href="#what-is-the-term-resource-used-in-kubernetes">What is the term “resource” used in Kubernetes?</a></li>
      <li><a href="#what-are-kubernetes-watches">What Are Kubernetes watches?</a></li>
      <li><a href="#what-is-kubernetes-api">What is Kubernetes API?</a></li>
      <li><a href="#what-are-proxies-in-kubernetes">What are proxies in Kubernetes?</a>
        <ul>
          <li><a href="#modes">Modes</a></li>
        </ul>
      </li>
      <li><a href="#what-is-container-runtime-interface-cri-in-kubernetes">What is Container Runtime Interface (CRI) in Kubernetes?</a></li>
      <li><a href="#what-it-mean-by-kubernetes-deprecating-docker">What it mean by Kubernetes deprecating Docker?</a>
        <ul>
          <li><a href="#what-is-dockershim-in-kubernetes-and-why-was-it-removed-from-kubernetes">What is dockershim in Kubernetes and why was it removed from Kubernetes?</a></li>
        </ul>
      </li>
      <li><a href="#which-container-runtimes-are-supported-by-kubernetes">Which container runtimes are supported by Kubernetes?</a></li>
      <li><a href="#how-to-ssh-into-minikube-virtual-machine">How to SSH into minikube virtual machine?</a></li>
      <li><a href="#how-to-deploy-pods-in-minikube-cluster">How to deploy pods in minikube cluster?</a></li>
      <li><a href="#how-to-start-a-cluster-with-multi-nodes-using-minikube">How to start a cluster with multi nodes using minikube?</a></li>
      <li><a href="#what-is-coredns">What is CoreDNS?</a>
        <ul>
          <li><a href="#coredns-vs-kube-dns">CoreDNS vs. kube-dns</a></li>
        </ul>
      </li>
      <li><a href="#is-multi-cluster-supported-by-minikube">Is multi-cluster supported by minikube?</a></li>
      <li><a href="#is-multi-cluster-supported-by-kind">Is multi-cluster supported by kind?</a></li>
      <li><a href="#what-are-the-pods-running-under-kube-system-namespace-in-minikube">What are the pods running under “kube-system” namespace in minikube?</a></li>
      <li><a href="#what-are-kubernetes-objects">What are Kubernetes objects?</a></li>
    </ul>
  </li>
</ul>
    </div>
    
    <!-- End Toc -->
    <h1 id="what-is-kubernetes">What is Kubernetes?</h1>

<p>Kubernetes is a Google-developed open source <strong>container orchestration platform</strong> for <strong>automating</strong> the <em>deployment</em>, <em>scaling</em>, and <em>management of containerized applications</em> across a distributed cluster of nodes. Containerized applications are those that run <em>inside containers</em>.</p>

<blockquote>
  <p><strong>Kubernetes supports various container runtimes:</strong> Kubernetes supports multiple container runtimes, one of them being Docker, which is one of the most well-known container tools on the market.</p>
</blockquote>

<p>The name Kubernetes originates from Greek, meaning helmsman or pilot. Kubernetes is often shortened to <strong>K8s</strong>, which comes from the fact that there are eight letters between the “K” and the “s.” Kubernetes has become the de facto standard for container orchestration.</p>

<p>Containers are a good way to bundle and run our applications.  In a production environment, it’s important to keep an eye on and manage the containers that run the applications to make sure there’s no downtime. In the event that one container goes down, another needs to be started. If a system were responsible for managing this behavior, wouldn’t it make things simpler?</p>

<p>That’s how Kubernetes comes to the rescue! Kubernetes provides us a framework that allows us to run distributed systems in a resilient manner. It takes care of scaling and failover for our application.</p>

<p>When developers want to deploy an application on multiple computers, they use Kubernetes rather than deploying the application on each computer individually. Kubernetes provides <em>an abstraction layer on top of the underlying infrastructure</em> (computers, networks, etc.) for both <em>users</em> and <em>applications</em>. Kubernetes hides the infrastructure underneath from the applications, making development and configuration simpler. Kubernetes’ primary goal is to hide the complexity of managing a collection of containers.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="/assets/images/posts/kubernetes-basics.png" alt="Figure 1: Kubernetes provides an abstraction on top of underlying infrastructure" title="Created by Author" /></th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><sup><em>Figure 1: Kubernetes provides an abstraction on top of underlying infrastructure.</em></sup></td>
      <td><br /><br /></td>
    </tr>
  </tbody>
</table>

<p>Having said that, Kubernetes enabled development teams to spend less time on technology and more time on capability.</p>

<p>Kubernetes provides us with:</p>

<ul>
  <li><strong>Service discovery</strong>: Kubernetes has the ability to expose a container by using either the DNS name or their own IP address.</li>
  <li><strong>Load balancing</strong>: Kubernetes is able to load balance and distribute the network traffic to ensure that the deployment remains stable even when there is a huge volume of traffic to a container.</li>
  <li><strong>Storage orchestration</strong>: Kubernetes allows us to automatically mount a storage system of our choice.</li>
  <li><strong>Automated rollouts and rollbacks</strong>: Using Kubernetes, we are able to specify the desired state of our deployed containers, and it is able to transform the actual state to the desired state at a controlled rate. For instance, we might automate Kubernetes to create new containers for our deployment, delete any existing containers, and transfer all of those containers’ resources to the newly generated container.</li>
  <li><strong>Automatic bin packing</strong>: We provide a cluster of nodes available to Kubernetes so that it may utilize those nodes to run containerized tasks. We inform Kubernetes of the required amount of memory and processor for each container. Kubernetes enables us to make the most efficient use of our resources by fitting containers onto our nodes.</li>
  <li><strong>Self-healing</strong>: Kubernetes restarts containers that fail, replaces containers, kills containers that don’t respond to your user-defined health check, and doesn’t expose them to clients until they are ready to serve.</li>
  <li><strong>Secret and configuration management</strong>: We are able to store and handle sensitive information with the help of Kubernetes. This includes passwords, OAuth tokens, and SSH keys. We can deploy and update secrets and application configuration without rebuilding our container images, and without exposing secrets in our stack configuration.</li>
</ul>

<hr class="grey_line" />

<h1 id="kubernetes-components">Kubernetes components</h1>

<p>Kubernetes cluster is made up of:</p>

<ul>
  <li>A <strong>control plane</strong> (aka <strong>master</strong>).</li>
  <li>A set of <strong>worker machines</strong> known as <strong>worker nodes</strong> or simply <strong>workers</strong>.</li>
  <li>A <strong>distributed storage system</strong> that is responsible for maintaining the cluster’s consistent state.</li>
</ul>

<p>When we deploy Kubernetes, it creates a <strong>cluster</strong>. A Kubernetes cluster is made up of a set of machines known as <strong>nodes</strong>. The nodes can be virtual machines (VMs) or physical machines. The nodes include a <strong>master node</strong> and a set of <strong>worker nodes</strong>. The worker nodes are responsible for running containerized applications. At least one worker is present in every cluster. Our applications that are contained inside the containers. Each worker node holds one or more containers.</p>

<p>The worker node(s) hosts the <strong>Pods</strong>. A pod represents one or more running containers. The <strong>control plane</strong> is responsible for managing the cluster’s worker nodes as well as the Pods. The control plane generally runs across multiple nodes in production environments, which provides fault tolerance and high availability.</p>

<h2 id="what-is-a-control-plane-and-why-do-we-need-it">What is a control plane and why do we need it?</h2>

<p>The control plane is the central nervous system of a Kubernetes cluster. It ensures that every component in the cluster is kept in the <em>desired state</em>.</p>

<blockquote>
  <p><strong>Desired state vs. actual state:</strong> Desired state is one of the core concepts of Kubernetes. It’s the state that we want the system to be in. The desired state is defined in a Kubernetes resource. The actual state, on the other hand, is the state that the system is actually in.</p>
</blockquote>

<p>Control plane receives data about <em>internal cluster events</em>, <em>external systems</em>, and <em>third-party applications</em>. It analyses the data, and based on that, it takes decisions and puts them into action. The control plane manages and maintains the worker nodes that hold the containerized applications.</p>

<h3 id="components-of-the-control-plane">Components of the control plane</h3>

<p>The control plane is made up of several components. All these components run on a node called the primary node or <strong>master node</strong>.</p>

<ul>
  <li>An <strong>API server</strong> as <strong>kube-apiserver</strong></li>
  <li>A <strong>scheduler</strong> as <strong>kube-scheduler</strong></li>
  <li>A <strong>controller manager</strong> as <strong>kube-controller-manager</strong></li>
  <li>A <strong>persistent data store</strong> as <strong>etcd</strong></li>
  <li>A <strong>cloud controller manager</strong> as <strong>cloud-controller-manager</strong></li>
</ul>

<h4 id="kube-apiserver">kube-apiserver</h4>

<p>The core of Kubernetes’ control plane is the API server called Kubernetes API. Kubernetes API acts as the <em>interface</em> via which the control plane communicates with the worker nodes and other external systems. An API can be anything that’s used for programmatic communication. The Kubernetes API in particular is RESTful. The command line interface, web user interface, users, and services communicate with the cluster through Kubernetes API.</p>

<p>The Kubernetes API lets us query and manipulate the state of API objects in Kubernetes such as Pods, Namespaces, ConfigMaps, and Events. The main implementation of the Kubernetes API server is the <code>kube-apiserver</code>. Since it is meant to extend horizontally, we are able to deploy many instances of the <code>kube-apiserver</code> in order to evenly distribute the load.</p>

<h4 id="etcd-persistent-data-store">etcd (persistent data store)</h4>

<p>Persistent data storage is provided by <a href="https://etcd.io/" target="_blank"><strong>etcd</strong></a>, which is a distributed, reliable key-value store. It is a standalone open source tool, and Kubernetes communicates to it using the <code>kube-apiserver</code>.</p>

<p>It stores the configuration information that is needed by the worker nodes as well as other data that is required to manage the cluster.</p>

<h4 id="kube-scheduler">kube-scheduler</h4>

<p>kube-scheduler is responsible for allocating new pods to the worker nodes. When the pods are assigned to a new worker node, the <code>kubelet</code> (node agent) running on the node retrieves the pod definition from the Kubernetes API. Then, the kubelet creates the required resources and containers in accordance with the pod specification.</p>

<p>In other words, the scheduler is a component that runs inside the control plane and is responsible for distributing the resources and workload across the worker nodes.</p>

<h4 id="kube-controller-manager">kube-controller-manager</h4>

<p>The Kubernetes controller manager is a daemon that acts as a continuous <em>control loop</em> in a Kubernetes cluster. A control loop is a kind of loop that does not terminate, and it monitors the current state of the cluster via calls made to the API Server, and changes the current state to match the desired state described in the cluster’s declarative configuration. The controller manager is made up of four different control loops that are referred to as <em>controller processes</em>. In order to achieve this goal, a controller loop is required to comprise two components:</p>

<ol>
  <li>Snapshot of the current state of the system.</li>
  <li>Access to the desired state of the system.</li>
</ol>

<p>These controller processes keep an eye on the status of the different services deployed through the API and take corrective action if the <em>current state</em> doesn’t match the <em>desired state</em>.</p>

<p>The controllers that ship with Kubernetes are:</p>

<ul>
  <li><strong>Replication controller</strong></li>
  <li><strong>Endpoints controller</strong></li>
  <li><strong>Namespace controller</strong></li>
  <li><strong>Serviceaccounts controller</strong></li>
</ul>

<p>Even though kube-controller-manager is composed of four separate processes, it runs as a single process in order to keep things as simple as possible.</p>

<h4 id="cloud-controller-manager">cloud-controller-manager</h4>

<p>The cloud-controller-manager is a separate component that connects the cluster to the API of the underlying cloud infrastructure. It runs only the controllers specific to the cloud provider, such as AWS, GCP, and so on. This way, the components interacting with our cloud provider are kept separate from the components that only interact with our cluster.</p>

<p>The cloud-controller-manager consists of three controller processes, which are combined into a single process to reduce complexity:</p>

<ul>
  <li><strong>Node controller</strong></li>
  <li><strong>Router controller</strong></li>
  <li><strong>Service controller</strong></li>
</ul>

<h2 id="kubernetes-concepts">Kubernetes concepts</h2>

<h3 id="cluster">Cluster</h3>

<p>A cluster is a collection of hosts or nodes that work together to offer computing, memory, storage, and networking resources. Kubernetes uses these resources to run the various workloads (applications).</p>

<h3 id="nodes">Nodes</h3>

<p>A single computer or host is referred to as a node.  It may be a physical or virtual machine. Its primary function is to run pods. Each node in a Kubernetes cluster is responsible for running a number of Kubernetes components, including the <strong>kubelet</strong>, the <strong>container runtime</strong>, and the kube-proxy. Nodes are managed by a Kubernetes master. The nodes are Kubernetes’s “worker bees,” and they are responsible for doing all of the heavy lifting.</p>

<h3 id="workloads">Workloads</h3>

<p>An application that is being executed on Kubernetes is referred to as a workload. On Kubernetes, we will execute our workload inside of a <em>set of</em> <strong>pods</strong>, regardless of whether our workload consists of a single component or multiple that operate together. In Kubernetes, a Pod represents a set of running <em>containers</em> on our cluster.</p>

<p>Note that we don’t need to manage each Pod directly. Pods are are managed by <em>controllers</em> in the form of a <em>control loop</em>. A controller is responsible for monitoring the current state of a Kubernetes resource and and makes the requests necessary to change its state to the desired state.</p>

<!--Instead, we can make use of *workload resources* that will take care of managing a set of pods on our behalf. In order to ensure that the *state* we defined is maintained, these resources configure *controllers* that check to see that the right number and type of pods are running.-->

<p>Kubernetes comes with a number of built-in <em>workload resources</em>, including the following:</p>

<ul>
  <li><strong>Deployment</strong></li>
</ul>

<h3 id="pod">Pod</h3>

<p>In Kubernetes, the unit of work is referred to as a pod. Each pod contains one or more containers. Containers that are contained inside pods are always scheduled together and always run on the same machine. All of the containers that make up a pod share the same IP address and port space. They connect with one another through localhost or standard inter-process communication.</p>

<p>In addition, all of the containers that are contained inside a pod have the ability to access shared local storage that is located on the node that is running the pod. By default, containers do not have access to either their local storage or any other storage. Volumes of storage must be mounted into each container inside the pod explicitly.</p>

<p>Pods are a great way to manage groups of containers that are closely related, depend on each other, and need to work together on the same host to get their job done. It is essential to keep in mind that pods are thought to be <em>ephemeral</em> (short-live), disposable entities that may be discarded and replaced whenever it is convenient. Any pod storage is destroyed with its pod. Every pod is given a unique identifier, also known as a UID, so that we can distinguish between them if necessary.</p>

<h3 id="labels">Labels</h3>

<p>In Kubernetes, a label is a kind of <em>metadata</em> that can be attached to objects like pods and services in the form of a <em>key-value pair</em>. The purpose of a label is to help users <em>identify the characteristics of objects</em> in a way that is meaningful and relevant to them. In other words, labels can help describe meaningful and relevant information about an object. However, labels do not directly change or effect any functionality in the core system.</p>

<p>Having said that, users will often need Kubernetes labels in order to identify Kubernetes objects and carry out helpful activities on those items. For example, consider a set of pods running on the Kubernetes cluster. Let’s say it’s necessary for us to delete all of the pods that are associated with the development environment. There is no simple method to determine which pods suit that description if labels are not assigned to them beforehand. As a result of this, locating each pod and deleting it can become challenging and time consuming.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="/assets/images/posts/kubernetes-labels.png" alt="Figure 2: Labels in Kubernetes" title="Created by Author" /></th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><sup><em>Figure 2: Labels in Kubernetes - Two separate environments, labeled as production and development.</em></sup></td>
      <td><br /><br /></td>
    </tr>
  </tbody>
</table>

<p>Note that the purpose of label is to identifying objects and not for attaching arbitrary metadata to objects.</p>

<p>Labels are intentionally designed with particular limitations in mind:</p>

<ul>
  <li>Each label that is attached to an object has to have its own <em>unique key</em>.</li>
  <li>The label key has two parts: <em>prefix8 and *name</em>.</li>
  <li>It is <em>not</em> required to use the prefix.</li>
  <li>In the event that prefix does exist, it must be a valid DNS subdomain and is denoted by the forward slash (/), which is separated from the name.</li>
  <li>The prefix must be 253 characters long at most.</li>
  <li>Names must start and end with an alphanumeric character (a-z, A-Z, 0-9) and contain only alphanumeric characters, dots, dashes, and underscores.</li>
  <li>Values follow the same restrictions as names.</li>
</ul>

<p>One of the most common ways to add labels to our resources is to add them directly to our config files. We can specify label values at <code>metadata.lables</code> like below:</p>

<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: metadata-demo
  labels:
    environment: demo
    app: nginx
spec:
  containers:
    - name: nginx
      image: nginx:1.14.2
      ports:
        - containerPort: 80
</code></pre>

<p>The <code>kubectl</code> command-line interface tool is the <em>alternative method</em> for working with labels. This comes in helpful when making minor adjustments to your resources. However, it is vital to keep in mind that the modifications we make will not be automatically reflected back to the configuration files we use.</p>

<p>To add a label to an existing resource, we can use the following command:</p>

<pre><code class="language-bash"># It creates a label “group” with a value of “temp”
kubectl label pod/metadata-demo group=temp
</code></pre>

<p>To remove the label, use this command:</p>

<pre><code class="language-bash">kubectl label pod/metadata-demo group-
</code></pre>

<h3 id="label-selectors">Label selectors</h3>

<p>Label selectors provide us the ability to filter objects based on their labels. For example, we can filter out all of the objects that have the label <code>env: production</code>.</p>

<h3 id="annotations">Annotations</h3>

<p>Annotations are another type of metadata we can use in Kubernetes. Like labels, annotations are key-value pairs. Annotation lets us associate arbitrary metadata with Kubernetes objects. Labels, on the other hand, can be used in the process of identifying and selecting items, but annotations cannot. Annotations are meant to be used to store any information about an object that doesn’t identify it.</p>

<p>Similar to labels, annotations can be added in a number of different methods, the most common of which are via config files or the <code>kubectl</code> command line.</p>

<p>For example, here’s the configuration file for a Pod that has the annotation <code>imageregistry: https://hub.docker.com/</code>:</p>

<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: annotations-demo
  annotations:
    imageregistry: "https://hub.docker.com/"
spec:
  containers:
  - name: nginx
    image: nginx:1.14.2
    ports:
    - containerPort: 80
</code></pre>

<h1 id="kubernetes-command-line-tools">Kubernetes command-line tools</h1>

<p>The command-line tools for Kubernetes are as follows:</p>

<ul>
  <li><a href="/kubernetes/2022/kubernetes-basics#kubectl"><code>kubectl</code></a></li>
  <li><a href="/kubernetes/2022/kubernetes-basics#kind"><code>kind</code></a></li>
  <li><a href="/kubernetes/2022/kubernetes-basics#minikube"><code>minikube</code></a></li>
  <li><a href="/kubernetes/2022/kubernetes-basics#kubeadm"><code>kubeadm</code></a></li>
</ul>

<h2 id="kubectl">kubectl</h2>

<p>The Kubernetes command-line tool is known as <code>kubectl</code>. It allows us to run commands against Kubernetes clusters. We can use <code>kubectl</code> to:</p>

<ul>
  <li>Deploy applications</li>
  <li>Inspect and manage cluster resources</li>
  <li>View logs</li>
</ul>

<p>Syntax:</p>

<pre><code class="language-bash">kubectl [command] [type] [name] [flags]
</code></pre>

<p>To verify that your cluster is working, use the following command:</p>

<pre><code class="language-bash">kubectl cluster-info

Kubernetes control plane is running at https://127.0.0.1:50918
CoreDNS is running at https://127.0.0.1:50918/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
</code></pre>

<p>The above output of <code>kubectl cluster-info</code> command indicates that the control plane is active and responding to requests.</p>

<p>Now use the <code>kubectl</code> command to list all nodes in our cluster:</p>

<pre><code class="language-bash">kubectl get nodes
</code></pre>

<p>The output will resemble what is shown below:</p>

<pre><code class="language-plain">NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   48d   v1.24.3
</code></pre>

<p>The above output shows a cluster with single node.</p>

<blockquote>
  <p><strong>Note:</strong> Everything in Kubernetes is represented as an <strong>object</strong>, which can be obtained and manipulated via the RESTful API. The <code>kubectl get</code> command retrieves a list of objects of the specified type from the API. In the above case, it’s of type “node”.</p>
</blockquote>

<p>To see more detailed information about an object, we use the following command:</p>

<pre><code class="language-bash">kubectl describe node &lt;name of the node&gt;
</code></pre>

<p>Because it is such a large output, I have chosen to exclude the actual output that the <code>describe</code> command generates.</p>

<p>To check the status of the pods for all the namespaces</p>

<pre><code class="language-bash">kubectl get pods --all-namespaces
</code></pre>

<p>The output look like the ones shown below:</p>

<pre><code class="language-bash">NAMESPACE              NAME                                         READY   STATUS    RESTARTS       AGE
default                nicepod                                      1/1     Running   3 (45m ago)    45d
kube-system            coredns-6d4b75cb6d-nsx8w                     1/1     Running   4 (45m ago)    45d
kube-system            etcd-minikube                                1/1     Running   5 (45m ago)    45d
kube-system            kube-apiserver-minikube                      1/1     Running   5 (45m ago)    45d
kube-system            kube-controller-manager-minikube             1/1     Running   6 (45m ago)    45d
kube-system            kube-proxy-8fhb9                             1/1     Running   4 (45m ago)    45d
kube-system            kube-scheduler-minikube                      1/1     Running   6 (45m ago)    45d
kube-system            storage-provisioner                          1/1     Running   16 (45m ago)   45d
kubernetes-dashboard   dashboard-metrics-scraper-78dbd9dbf5-9xnmp   1/1     Running   3 (45m ago)    45d
kubernetes-dashboard   kubernetes-dashboard-5fd5574d9f-bpqrz        1/1     Running   8 (45m ago)    45d
</code></pre>

<p>To check the physical and internal IP details of all the pods, use the following command:</p>

<pre><code class="language-bash">kubectl get pods -n &lt;namespace&gt; -o wide
</code></pre>

<h2 id="kind">kind</h2>

<p><code>kind</code> lets us run Kubernetes on our local computer. This tool requires that we have Docker installed and configured. In other words, it runs local Kubernetes clusters using Docker container “nodes”. kind was primarily designed for testing Kubernetes, but it can also be used for local development or CI.</p>

<p>It has both support for:</p>
<ul>
  <li>Multi-cluster</li>
  <li>Multi-node</li>
</ul>

<p>It puts the cluster into Docker containers. This leads to a significantly faster startup speed compared to spawning a VM. However, creating a cluster is very similar to minikube’s approach.</p>

<h3 id="installation">Installation</h3>

<p>Refer <a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation" target="_blank">here</a> to install kind.</p>

<h3 id="create-a-cluster">Create a cluster</h3>

<p>To create a cluster:</p>

<pre><code class="language-bash">kind create cluster
</code></pre>

<p>This will bootstrap a Kubernetes cluster using a pre-built node image. The node image is a Docker image for running nested containers, systemd, and Kubernetes components. Prebuilt images are hosted at <a href="https://hub.docker.com/r/kindest/node/" target="_blank">kindest/node</a>. To specify another image use the <code>--image</code> flag as shown below:</p>

<pre><code class="language-bash">kind create cluster --image &lt;&gt;
</code></pre>

<p>Note that kind has the ability to load our local images directly into the cluster. This saves us from having to set up a registry and push our image every time we want to try out our changes.</p>

<p>Using the following command, we can able to load our local images:</p>

<pre><code class="language-bash">kind load docker-image my-app:latest
</code></pre>

<p>By default, the cluster will be given the name kind. Use the <code>--name</code> flag to assign the cluster a different context name.</p>

<pre><code class="language-bash">kind create cluster --name kind-2
</code></pre>

<h3 id="interacting-with-the-cluster">Interacting with the cluster</h3>

<p>After creating a cluster, you can use <code>kubectl</code> to interact with it by using the configuration file generated by kind. By default, the cluster access configuration is stored in <code>${HOME}/.kube/config</code> if <code>$KUBECONFIG</code> environment variable is not set.</p>

<p>To list the clusters created using kind:</p>

<pre><code class="language-bash">kind get clusters
</code></pre>

<p>In order to interact with a specific cluster, we only need to specify the cluster name as a context in kubectl:</p>

<pre><code class="language-bash">kubectl cluster-info --context kind-&lt;name&gt;
</code></pre>

<p>Deleting a cluster:</p>

<pre><code class="language-bash">kind delete cluster --name &lt;name&gt;
</code></pre>

<p>Loading an image into the cluster:</p>

<pre><code class="language-bash">kind load docker-image my-custom-image-0 my-custom-image-1 --name kind-2
</code></pre>

<p>Note that <code>--name</code> flag is optional if the cluster created wit default name i.e., <code>kind</code>.</p>

<h2 id="minikube">minikube</h2>

<p>Like <code>kind</code>, <code>minikube</code> is a tool that enables us to run Kubernetes on a <em>local computer</em>. In order for us to get a feel for Kubernetes, <code>minikube</code> runs a Kubernetes cluster with a <em>single node</em> on each of our individual computers (including Windows, macOS, and Linux PCs). It does this by spawning a VM that is essentially a single-node K8s cluster.</p>

<blockquote>
  <p><strong>Spawning:</strong> Spawning in computing refers to a function that loads and executes a new child process.</p>
</blockquote>

<p>Note that minikube does not support multi-cluster; however, it supports multi-node cluster.</p>

<h3 id="minimum-requirements-to-install-minikube">Minimum requirements to install minikube</h3>
<ul>
  <li>2 CPUs or more</li>
  <li>2GB of free memory</li>
  <li>20GB of free disk space</li>
  <li>Container or virtual machine manager, such as:
    <ul>
      <li><strong>Docker</strong></li>
      <li><strong>Hyperkit</strong></li>
      <li><strong>Hyper-V</strong></li>
      <li><strong>KVM</strong></li>
      <li><strong>Parallels</strong></li>
      <li><strong>Podman</strong></li>
      <li><strong>VirtualBox</strong></li>
      <li><strong>VMware Fusion/Workstation</strong></li>
    </ul>
  </li>
</ul>

<p><strong>minikube with Docker:</strong> If we choose Docker as the container or VM manager for minikube, minikube runs as a Docker container as shown below:<br /><br /><img src="/assets/images/posts/minikube-as-docker-container.png" alt="Figure 1: minikube custer runs as a Docker container" /><br /><sup><em>Figure 1: minikube custer runs as a Docker container.</em></sup><br /></p>

<p>To install the latest <code>minikube</code> stable release on on x86-64 macOS using Homebrew:</p>

<pre><code class="language-bash">brew install minikube
</code></pre>

<h3 id="start-our-cluster">Start our cluster</h3>

<p>To start a single-node cluster:</p>

<pre><code class="language-bash">minikube start
</code></pre>

<h3 id="minikube-dashboard">minikube dashboard</h3>

<p>minikube has integrated support for the web-based dashboard. To access the web-based dashboard:</p>

<pre><code class="language-bash">minikube dashboard
</code></pre>

<p>This will enable the dashboard add-on, and open the proxy in the default web browser. If we we do not want to launch a web browser, we can instruct the dashboard command to instead merely output a URL as shown below:</p>

<pre><code class="language-bash">minikube dashboard --url
</code></pre>

<p>We can use dashboard to:</p>

<ul>
  <li>Deploy containerized applications to a Kubernetes cluster.</li>
  <li>Troubleshoot your containerized application.</li>
  <li>Manage the cluster resources.</li>
  <li>Get an overview of applications running on your cluster.</li>
  <li>Creating or modifying individual Kubernetes resources such as Deployments, Jobs, DaemonSets, etc.</li>
</ul>

<h2 id="kubeadm">kubeadm</h2>

<p>We can use the <code>kubeadm</code> tool to create and manage Kubernetes clusters. It performs the tasks required to get a minimum viable, secure cluster up and running in a manner that is friendly to users.</p>

<h1 id="deploying-a-kubernetes-cluster">Deploying a Kubernetes cluster</h1>

<p>There are many different ways that Kubernetes cluster can be deployed:</p>

<ul>
  <li>Installing and configuring a full-fledged Kubernetes cluster with multiple nodes.</li>
  <li>Using the built-in Kubernetes cluster in Docker Desktop.</li>
  <li>Running a local cluster using minikube CLI</li>
</ul>

<h2 id="installing-and-configuring-a-full-fledged-kubernetes-cluster-with-multiple-nodes">Installing and configuring a full-fledged Kubernetes cluster with multiple nodes</h2>

<p>It is not an easy job to set up a full-fledged Kubernetes cluster with multiple nodes, particularly if we are not familiar with Linux or network management. A proper Kubernetes installation involves the use of many physical or virtual machines and requires proper network setup to allow all containers in the cluster to communicate with one another.</p>

<p>A full-ledged Kubernetes cluster can be installed:</p>

<ul>
  <li>On our our <strong>local machines</strong>.</li>
  <li>On <strong>virtual machines</strong> provided by cloud providers like Google Compute Engine, Amazon EC2, Microsoft Azure, and so on.</li>
  <li>On the other hand, almost all cloud service providers now offer <strong>managed Kubernetes services</strong>, which saves us the trouble of installing and managing it. A brief list of the services offered by the most popular cloud providers follows: Google offers <strong>GKE</strong>, Amazon has <strong>EKS</strong>, Microsoft has <strong>AKS</strong>, and so on.</li>
</ul>

<p>Keep in mind that installing and managing Kubernetes ourselves is a much more complicated task than just using it, especially before we know a lot about its architecture and how it works.</p>

<h2 id="using-the-built-in-kubernetes-cluster-in-docker-desktop">Using the built-in Kubernetes cluster in Docker Desktop</h2>

<p>Docker Desktop for macOS and Windows comes preinstalled with a single-node Kubernetes cluster that can be enabled by going into the Settings dialog box as shown in <em>Figure 2</em> below.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="/assets/images/posts/kurbernetes-comes-with-docker-desktop.png" alt="Figure 2: Kubernetes preinstalled with Docker Desktop" /></th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><sup><em>Figure 2: Kubernetes preinstalled with Docker Desktop.</em></sup></td>
      <td><br /><br /></td>
    </tr>
  </tbody>
</table>

<h2 id="running-a-local-cluster-using-minikube-cli">Running a local cluster using minikube CLI</h2>

<p><code>minikube</code>, which is a command-line tool that is maintained by the Kubernetes community, is yet another method that can be used to create a Kubernetes cluster. It enables us to run Kubernetes on a local computer. In order for us to get a feel for Kubernetes, minikube runs a Kubernetes cluster with a single node on each of our individual computers (including Windows, macOS, and Linux PCs).</p>

<h3 id="installing-minikube-cli">Installing minikube CLI</h3>

<p>minikube CLI supports macOS, Linux, and Windows. It just consists of a single executable binary file, which can be found in the minikube repository on <a href="https://github.com/kubernetes/minikube" target="_blank">GitHub</a>. More information on how to install it for various operating systems can be found <a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank">here</a>. </p>

<h2 id="packing-applications-in-containers">Packing applications in containers</h2>
<p>Applications come in many different shapes and sizes. They begin by taking input, manipulating the data, and then providing the results. Application programs normally have a <em>language runtime</em>, <em>libraries</em> including external libraries, <em>configurations</em>, and <em>source code</em> as their primary components.</p>

<p>There are many ways to deploy these applications as a whole:</p>

<ul>
  <li><strong>Configuration management systems:</strong> We can use configuration management systems like Puppet or Ansible, which use code to install, run, configure, and update applications.</li>
  <li><strong>Omnibus package:</strong> It’s an effort to include everything that the program requires in a single file as much as possible. For example, a Java omnibus package would include the Java runtime as well as all the JAR files for the application.</li>
</ul>

<p>From an operational point of view, we need to be able to handle not just all of these various kinds of packages or applications, but also a fleet of servers on which to host them. These servers need to be provisioned, networked, deployed, configured, kept up-to-date with security patches, monitored, and managed. This all takes a significant amount of time, technical expertise, and effort just to provide a platform to run applications on.</p>

<h3 id="kubernetes-configuration">Kubernetes configuration</h3>

<hr class="grey_line" />

<h1 id="frequently-asked-questions-faq">Frequently asked questions (FAQ)</h1>

<h2 id="can-we-have-more-than-one-container-in-a-worker-node">Can we have more than one container in a worker node?</h2>

<p>Yes. Each worker node holds one or more containers.</p>

<h2 id="where-the-pods-are-hosted">Where the pods are hosted?</h2>

<p>The worker node(s) hosts the Pods.</p>

<h2 id="what-is-the-workload-in-kubernetes">What is the workload in Kubernetes?</h2>

<p>A workload is an <em>application</em> running on Kubernetes. On Kubernetes, our workload is always run within a collection of pods, regardless of whether it consists of a single component or several that work together.</p>

<h2 id="what-is-kubelet">What is kubelet?</h2>

<p>Every worker node has a <em>node agent</em> called Kubelet that it runs. It oversees communicating with the master components and manages the running pods. Here are the key things that the Kubelet does:</p>

<ul>
  <li>Receiving pod specs</li>
  <li>Downloading pod secrets from the API server</li>
  <li>Mounting volumes</li>
  <li>Running the pod’s containers (via the configured runtime)</li>
  <li>Reporting the status of the node and each pod</li>
  <li>Running the container startup, liveness, and readiness probes</li>
</ul>

<h2 id="what-is-the-term-resource-used-in-kubernetes">What is the term “resource” used in Kubernetes?</h2>

<p>Anything we create in a Kubernetes cluster is considered a resource: <strong>deployments</strong>, <strong>pods</strong>, <strong>services</strong> and so on.</p>

<h2 id="what-are-kubernetes-watches">What Are Kubernetes watches?</h2>

<p>Getting the state of the resources using the <strong>Kubernetes API</strong> at a <em>certain point in time</em> isn’t always enough when working with Kubernetes clusters, because these clusters are highly dynamic in nature. In most cases, we also want to <em>keep an eye on</em> these resources and track events as they happen.</p>

<p>Regular pooling is one strategy that may be used. However, polling puts us at risk of missing events that take place in the interval between polling cycles. Additionally, when the number of resources that need to be monitored rises, this strategy will not scale up very effectively.</p>

<p>TODO - How it’s addressed by watches?</p>

<h2 id="what-is-kubernetes-api">What is Kubernetes API?</h2>

<p>TODO</p>

<h2 id="what-are-proxies-in-kubernetes">What are proxies in Kubernetes?</h2>

<p>KubeProxy is a network proxy that is implemented as a component of the Kubernetes Service. It runs on every node in the cluster. It maintains a record of the <em>network rules</em> that govern communication between pods located within and outside of the cluster. In other words, these network rules allow network communication to our Pods from network sessions inside or outside of our cluster.</p>

<p>To put it simply, kube-proxy on each node takes care of redirecting traffic to the correct pod.</p>

<h3 id="modes">Modes</h3>

<p>There are two kube-proxy modes:</p>

<ul>
  <li>IPTABLES (default)</li>
  <li>IPVS (IP Virtual Server) - It’s an advanced configuration used in a cluster with thousands of servers and offers high network performance.</li>
</ul>

<h2 id="what-is-container-runtime-interface-cri-in-kubernetes">What is Container Runtime Interface (CRI) in Kubernetes?</h2>

<p>In the early days of Kubernetes, the <strong>Docker Engine</strong> was the only <strong>container runtime</strong> that was supported. After some time, more container runtimes were made available, such as <strong>rkt</strong> and <strong>hypernetes</strong>, and each container runtime has it own strengths. It became evident that users of Kubernetes want a choice of runtimes that would work best for them.</p>

<p>The <strong>Container Runtime Interface</strong> (<strong>CRI</strong>) was released (1.5 release) to allow that flexibility. It’s a plugin interface which enables <code>kubelet</code> to use a wide variety of container runtimes <em>without the need to recompile</em>. For more information about CRI, refer <a href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/" target="_blank">here</a>.</p>

<h2 id="what-it-mean-by-kubernetes-deprecating-docker">What it mean by Kubernetes deprecating Docker?</h2>

<p>Docker as an underlying container runtime is being deprecated in favor of runtimes that use the <strong>Container Runtime Interface</strong> (<strong>CRI</strong>) created for Kubernetes. Note that Docker-produced images will continue to work in our cluster with all runtimes normally. Docker is still a useful tool for building containers, and the images that are produced as a result of executing <code>docker build</code> can still run in our Kubernetes cluster.</p>

<p>The container runtime is responsible for pulling and running our container images. Docker is a popular choice for that runtime, but <em>Docker was not designed to be embedded inside Kubernetes</em>, and that causes a problem.</p>

<p>Docker is not just a single piece; rather, it refers to a whole technology stack. It includes a component known as “containerd,” which is a high-level container runtime by itself. Also, Docker has a lot of UX enhancements that make it really easy for humans to interact with when we are doing development work. However, these UI enhancements aren’t required for Kubernetes, , because it isn’t a human.</p>

<p>Kubernetes cluster has to use another tool called Dockershim to get at what it really needs, which is containerd. Kubernetes support for Docker via <code>dockershim</code> is now removed.</p>

<h3 id="what-is-dockershim-in-kubernetes-and-why-was-it-removed-from-kubernetes">What is dockershim in Kubernetes and why was it removed from Kubernetes?</h3>

<p>The introduction of the Container Runtime Interface (CRI) was a great step forward in providing us with the flexibility to use any container runtime of our choice, but it did introduce a problem: Docker Engine was being used as a container runtime well before CRI was introduced, and Docker Engine is not compatible with CRI.</p>

<blockquote>
  <p><strong>What is the term “shim” in computing?</strong> A shim is a small library that transparently intercepts and modifies calls to an API, usually for compatibility purposes.</p>
</blockquote>

<p>To solve this issue, a small software shim called <strong>dockershim</strong> was introduced as part of the <strong>kubelet</strong> component specifically to fill in the gaps that exist between Docker Engine and CRI, allowing cluster operators to continue using Docker Engine as their container runtime largely uninterrupted.</p>

<p>However, this little software shim was never intended to be a long-term solution. Over the years, dockershim’s existence has made the kubelet much more complicated than it needs to be. Unfortunately, this caused some concern among the community since the deprecation notice wasn’t presented as clearly as it should have been.</p>

<p>Kubernetes has published a <a href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/" target="_blank">blog</a> post that includes a frequently asked questions section in an effort to allay the concerns of the community and clear up any misunderstandings on what Docker is and how containers function inside Kubernetes.</p>

<p>Note that Docker is not going away, either as a tool or as a company.</p>

<h2 id="which-container-runtimes-are-supported-by-kubernetes">Which container runtimes are supported by Kubernetes?</h2>

<p>In its early stages, Kubernetes only provided support for the Docker container runtime engine. However, it is not the case any more. Kubernetes now provides support for a variety of runtimes:</p>

<ul>
  <li>Docker via dockershim</li>
  <li>rkt</li>
  <li>CRI-O</li>
  <li>Frakti</li>
  <li>rktlet</li>
  <li>CRI-containerd</li>
</ul>

<h2 id="how-to-ssh-into-minikube-virtual-machine">How to SSH into minikube virtual machine?</h2>

<p>Use the following command to SSH into minikube VM:</p>

<pre><code class="language-bash">minikube ssh

uname -a
logout
</code></pre>

<h2 id="how-to-deploy-pods-in-minikube-cluster">How to deploy pods in minikube cluster?</h2>

<p>Let’s create a pod and expose it on port 80:</p>

<pre><code class="language-bash">kubectl create deployment hello --image=docker.io/nginx:1.23
kubectl expose deployment hello --type=NodePort --port=8080
</code></pre>
<p>The <code>create deployment</code> command will create a deployment, which will then create a pod with one container running the given image. We can use the following command to get the status of the deployment:</p>

<pre><code class="language-bash">kubectl get deploy
</code></pre>

<p>To see the pod that the deployment created, run the following command:</p>

<pre><code class="language-bash">kubectl get po
</code></pre>

<p>The output looks like the pictures below:</p>

<pre><code class="language-bash">NAME                     READY   STATUS    RESTARTS        AGE
echo-5b565549d6-6rrv2    1/1     Running   1 (5h21m ago)   8h
hello-795877ccfc-245tt   1/1     Running   1 (5h21m ago)   8h
nicepod                  1/1     Running   4 (5h21m ago)   46d
</code></pre>

<p>Note that the reason the Pod has two sets of random characters in the name is that the deployment has created a <strong>ReplicaSet</strong> to perform the actual pod management, and the ReplicaSet created the Pod.</p>

<p>When the service is exposed as type <code>NodePort</code>, it is available to the host on some port. But we did not run the pod on the <code>8080</code> port. In the cluster, ports are mapped. We need the cluster IP and the exposed port in order to get to the service.</p>

<p>Use the following command to find the cluster IP:</p>

<pre><code class="language-bash">minikube ip
</code></pre>

<p>To check if the pod is created, use the following command:</p>

<pre><code class="language-bash">kubectl get pods
</code></pre>

<h2 id="how-to-start-a-cluster-with-multi-nodes-using-minikube">How to start a cluster with multi nodes using minikube?</h2>

<p>We can start a cluster with multi nodes in the driver of our choice. In the below, we are starting a cluster with 2 nodes:</p>

<pre><code class="language-bash">minikube start --nodes 2 -p multinode-demo
</code></pre>

<p>We can also check the status of your nodes:</p>

<pre><code class="language-bash">minikube status -p multinode-demo
</code></pre>

<p>Output:</p>

<pre><code class="language-plain">multinode-demo
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured

multinode-demo-m02
type: Worker
host: Running
kubelet: Running
</code></pre>

<h2 id="what-is-coredns">What is CoreDNS?</h2>

<p>CoreDNS is a flexible DNS server written in the Go programming language that can serve as the Kubernetes cluster DNS. Since it is written in Go, the top-end performance is also not good. But it’s not a problem because we don’t use CoreDNS in places where we need really fast performance.</p>

<p>It uses a plugin-based architecture, which is easily extended. To support different cloud-native stacks, for example. It also supports DNS over TLS (DoT) and DNS over gRPC.</p>

<p>It has native support for service discovery for Kubernetes. It is integrated with etcd and cloud vendors (e.g., AWS’s Route 53). It has support for Prometheus metrics. It is also capable of forwarding to a recursive DNS server, and this is really important because it doesn’t actually have the capability to act as a full-service DNS recursive itself.</p>

<h3 id="coredns-vs-kube-dns">CoreDNS vs. kube-dns</h3>

<ul>
  <li>An easily extensible plugin-architecture with a rich set of plugins</li>
  <li>It is simple, with fewer moving parts (single executable and process), and all written in Go.</li>
  <li>Customizable DNS entries in and out of the cluster domain. For example, we can add static DNS data within the cluster domain.</li>
  <li>Experimental server-side search path to reduce query volume.</li>
</ul>

<h2 id="is-multi-cluster-supported-by-minikube">Is multi-cluster supported by minikube?</h2>

<p>No. Note that minikube does not support multi-cluster; however, it supports multi-node cluster.</p>

<h2 id="is-multi-cluster-supported-by-kind">Is multi-cluster supported by kind?</h2>

<p>Yes. Note that kind does support both multi-cluster and multi-node cluster.</p>

<h2 id="what-are-the-pods-running-under-kube-system-namespace-in-minikube">What are the pods running under “kube-system” namespace in minikube?</h2>

<p>The following pods are running under “kube-system” namespace:</p>

<ul>
  <li>coredns</li>
  <li>etcd-minikube</li>
  <li>kube-apiserver-minikube</li>
  <li>kube-controller-manager-minikube</li>
  <li>kube-proxy</li>
  <li>kube-scheduler-minikube</li>
  <li>storage-provisioner</li>
</ul>

<h2 id="what-are-kubernetes-objects">What are Kubernetes objects?</h2>

<p>Kubernetes objects are persistent entities in the Kubernetes system. Kubernetes uses these entities to represent the state of our cluster. Specifically, they can describe:</p>

<ul>
  <li>What containerized applications are running (and on which nodes)</li>
  <li>The resources available to those applications</li>
  <li>The policies around how those applications behave, such as restart policies, upgrades, and fault-tolerance</li>
</ul>

<p>Once we’ve create the object, Kubernetes will keep working to make sure that object exists. By creating an object, we tell the Kubernetes system how we want our cluster’s workload to look. This is the desired state of our cluster.</p>

</div>

<!-- Rating -->


<!-- Author Box if enabled from _config.yml -->
<!-- Author Box -->




<!-- Comments if not disabled with comments: false -->
<!-- Comments
================================================== -->
 
<div class="comments mt-5">
    <button class="btn btn-outline-dark py-3 px-5 d-block w-100 show-comments"><i class="fa fa-comments text-muted"></i> &nbsp; Show comments</button>         
    <div id="comments">  
        <h4 class="mb-4">Comments</h4>                 
            <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'rustinaction'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
     
    <div class="clearfix"></div>              
    </div>    
</div>       


<!-- Share -->
<div class="share">
    <!-- <ul>
        <li class="ml-1 mr-1">
            <a href="/" ><i class="fas fa-home"></i></a>
        </li>
    </ul>
    <hr> -->
    <!---->
    <span>Share</span>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Kubernetes Basics&url=http://localhost:4000/kubernetes/2022/kubernetes-basics" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa-brands fa-x-twitter"></i>
            </a>
        </li>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/kubernetes/2022/kubernetes-basics" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>
        <!--<li class="ml-1 mr-1">
            <a target="_blank" href="http://news.ycombinator.com/submitlink?u=http://localhost:4000/kubernetes/2022/kubernetes-basics" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-y-combinator"></i>
            </a>
        </li>
        <li class="ml-1 mr-1">
            <a target="_blank" href="http://www.reddit.com/submit?url=http://localhost:4000/kubernetes/2022/kubernetes-basics&title=Kubernetes Basics" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-reddit"></i>
            </a>
        </li>-->                 
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://api.whatsapp.com/send?text=Kubernetes Basics%20http://localhost:4000/kubernetes/2022/kubernetes-basics" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-whatsapp"></i>
            </a>
        </li>
        <li class="ml-1 mr-1">
            <a href="#" onclick="copyToClipboard()">
                <i class="fas fa-link"></i>
            </a>
            <script>
                function copyToClipboard() { 
                   window.navigator.clipboard.writeText(`http://localhost:4000/kubernetes/2022/kubernetes-basics`);
                }
            </script>
        </li>         
        <!--
        
            <ul>
                <li>
                <a class="small" href="#disqus_thread"></a>
                </li>
            </ul>
           
        -->
    </ul>
    <!---->
</div>


<!-- Related Post -->
<!-- Related Posts
================================================== -->
<div class=" related-posts ">  

    
    <h2 class="text-center mb-4">Explore more like this</h2>
    
    
    <div class="d-flex justify-content-center align-items-center">
    
    <!-- Categories -->
    <!--
    
    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/categories#kubernetes">kubernetes</a>                
    
    -->

    <!-- Tags -->  
    
                    
    <a class="smoothscroll badge badge-primary text-lowercase" href="/tags#container-management">container-management</a>               
                    
    <a class="smoothscroll badge badge-primary text-lowercase" href="/tags#container-orchestration">container-orchestration</a>               
                    
    <a class="smoothscroll badge badge-primary text-lowercase" href="/tags#kubernetes">kubernetes</a>               
    

    </div>

    
    
    
    <div class="blog-grid-container">
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
               
        
            
                
                
            
                
            
                
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
               
        
            
                
                
            
                
            
                
               
        
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
            
                
                
            
                
            
                
               
        
               
        
            
                
                
            
                
            
                
               
        
        </div>        
</div>

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->

        </div>

        
        <!-- Newsletter -->
        <div class="newsletter text-center">
            <span class="h4"><!--<img src="/assets/images/logo/logo_transparent.png" class="newsletter-logo" alt="thoughtful works"> &nbsp;-->If you like our posts and don't want to miss any of them, sign up for our newsletter.</span>
            <form action="https://gmail.us17.list-manage.com/subscribe?u=155954fdd35cc37fcbfab134a&id=acc42a78d4" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate>
                <div class="mc-field-group d-inline-flex">
                <input type="email" placeholder="Your e-mail" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required>
                <input type="submit" value="Subscribe" name="subscribe" class="heart">
                </div>
            </form>
        </div>
        
        
    </div>

    <!-- Begin Footer -->
    <!-- <script>
        const repoOwner = 'rust-lang';
        const repoName = 'rust';

        const apiUrlRelease = `https://api.github.com/repos/${repoOwner}/${repoName}/releases/latest`;
      
        fetch(apiUrlRelease)
            .then(response => response.json())
            .then(data => {
            document.getElementById('current-release').innerText = `${data.tag_name}`;
            document.getElementById('release-url').innerHTML = `<a href="${data.html_url}" target="_blank">${data.tag_name}</a>`;
            })
            .catch(error => console.error('Error fetching GitHub release information:', error));
    </script>  -->

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-12 text-center text-lg-left">
                    Copyright © 2024 <b>thoughtful works</b> | <a href="/privacy-policy.html" target="_blank">Privacy Policy</a> | Made with <b>Jekyll</b> and hosted on <b>GitHub Pages</b> | This website DOES NOT use cookies.
                </div>
                <div class="col-md-6 col-sm-12 text-center text-lg-right">    
                    <!-- <i class="fa-brands fa-rust"></i> <a href=`<span id="release-url"></span>`><span id="current-release"></span></a>&nbsp;<i class="fa-solid fa-tag"></i>&nbsp;(latest) -->
                    <!-- - <i class="fa-solid fa-star"></i> <span id="repo-stars"></span> -->
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    </div> <!-- /.site-content -->

    <!-- Scripts (if you need bootstrap.js, please add it yourself. I didn't use it for performance reasons, it was not needed in this theme) -->

    <script src="/assets/js/prism.js"></script>

    <script src="/assets/js/theme.js"></script>

    

    
    <script id="dsq-count-scr" src="//rustinaction.disqus.com/count.js"></script>
    
</body>
</html>
